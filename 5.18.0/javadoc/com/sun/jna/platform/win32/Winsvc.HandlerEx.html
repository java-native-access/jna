<!DOCTYPE HTML>
<html lang="en">
<head>
<!-- Generated by javadoc (21) -->
<title>Winsvc.HandlerEx (JNA API)</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="description" content="declaration: package: com.sun.jna.platform.win32, interface: Winsvc, interface: HandlerEx">
<meta name="generator" content="javadoc/ClassWriterImpl">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
<link rel="stylesheet" type="text/css" href="../../../../../script-dir/jquery-ui.min.css" title="Style">
<script type="text/javascript" src="../../../../../script.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-3.7.1.min.js"></script>
<script type="text/javascript" src="../../../../../script-dir/jquery-ui.min.js"></script>
</head>
<body class="class-declaration-page">
<script type="text/javascript">var pathtoroot = "../../../../../";
loadScripts(document, 'script');</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<div class="flex-box">
<header role="banner" class="flex-header">
<nav role="navigation">
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="top-nav" id="navbar-top"><button id="navbar-toggle-button" aria-controls="navbar-top" aria-expanded="false" aria-label="Toggle navigation links"><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span><span class="nav-bar-toggle-icon">&nbsp;</span></button>
<div class="skip-nav"><a href="#skip-navbar-top" title="Skip navigation links">Skip navigation links</a></div>
<div class="about-language">JNA API - 5.18.0</div>
<ul id="navbar-top-firstrow" class="nav-list" title="Navigation">
<li><a href="../../../../../index.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="nav-bar-cell1-rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html#class">Help</a></li>
</ul>
<ul class="sub-nav-list-small">
<li>
<p>Summary:</p>
<ul>
<li><a href="#nested-class-summary">Nested</a></li>
<li><a href="#field-summary">Field</a></li>
<li>Constr</li>
<li><a href="#method-summary">Method</a></li>
</ul>
</li>
<li>
<p>Detail:</p>
<ul>
<li>Field</li>
<li>Constr</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</li>
</ul>
</div>
<div class="sub-nav">
<div id="navbar-sub-list">
<ul class="sub-nav-list">
<li>Summary:&nbsp;</li>
<li><a href="#nested-class-summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field-summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-summary">Method</a></li>
</ul>
<ul class="sub-nav-list">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method-detail">Method</a></li>
</ul>
</div>
<div class="nav-list-search"><a href="../../../../../search.html">SEARCH</a>
<input type="text" id="search-input" disabled placeholder="Search">
<input type="reset" id="reset-button" disabled value="reset">
</div>
</div>
<!-- ========= END OF TOP NAVBAR ========= -->
<span class="skip-nav" id="skip-navbar-top"></span></nav>
</header>
<div class="flex-content">
<main role="main">
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="sub-title"><span class="package-label-in-type">Package</span>&nbsp;<a href="package-summary.html">com.sun.jna.platform.win32</a></div>
<h1 title="Interface Winsvc.HandlerEx" class="title">Interface Winsvc.HandlerEx</h1>
</div>
<section class="class-description" id="class-description">
<dl class="notes">
<dt>All Superinterfaces:</dt>
<dd><code><a href="../../AltCallingConvention.html" title="interface in com.sun.jna">AltCallingConvention</a></code>, <code><a href="../../Callback.html" title="interface in com.sun.jna">Callback</a></code>, <code><a href="../../win32/StdCall.html" title="interface in com.sun.jna.win32">StdCall</a></code>, <code><a href="../../win32/StdCallLibrary.StdCallCallback.html" title="interface in com.sun.jna.win32">StdCallLibrary.StdCallCallback</a></code></dd>
</dl>
<dl class="notes">
<dt>Enclosing interface:</dt>
<dd><code><a href="Winsvc.html" title="interface in com.sun.jna.platform.win32">Winsvc</a></code></dd>
</dl>
<hr>
<div class="type-signature"><span class="modifiers">public static interface </span><span class="element-name type-name-label">Winsvc.HandlerEx</span><span class="extends-implements">
extends <a href="../../win32/StdCallLibrary.StdCallCallback.html" title="interface in com.sun.jna.win32">StdCallLibrary.StdCallCallback</a></span></div>
<div class="block">An application-defined callback function used with the
 RegisterServiceCtrlHandlerEx function. A service program can use it as
 the control handler function of a particular service.

 <p>
 This function supersedes the Handler control handler function used with
 the
 <a href="Advapi32.html#RegisterServiceCtrlHandlerEx(java.lang.String,com.sun.jna.platform.win32.Winsvc.HandlerEx,com.sun.jna.Pointer)"><code>Advapi32.RegisterServiceCtrlHandlerEx(java.lang.String, com.sun.jna.platform.win32.Winsvc.HandlerEx, com.sun.jna.Pointer)</code></a>
 function. A service can use either control handler, but the new control
 handler supports user-defined context data and additional extended
 control codes.</p></div>
</section>
<section class="summary">
<ul class="summary-list">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<li>
<section class="nested-class-summary" id="nested-class-summary">
<h2>Nested Class Summary</h2>
<div class="inherited-list">
<h2 id="nested-classes-inherited-from-class-com.sun.jna.Callback">Nested classes/interfaces inherited from interface&nbsp;com.sun.jna.<a href="../../Callback.html" title="interface in com.sun.jna">Callback</a></h2>
<code><a href="../../Callback.UncaughtExceptionHandler.html" title="interface in com.sun.jna">Callback.UncaughtExceptionHandler</a></code></div>
</section>
</li>
<!-- =========== FIELD SUMMARY =========== -->
<li>
<section class="field-summary" id="field-summary">
<h2>Field Summary</h2>
<div class="inherited-list">
<h3 id="fields-inherited-from-class-com.sun.jna.Callback">Fields inherited from interface&nbsp;com.sun.jna.<a href="../../Callback.html" title="interface in com.sun.jna">Callback</a></h3>
<code><a href="../../Callback.html#FORBIDDEN_NAMES">FORBIDDEN_NAMES</a>, <a href="../../Callback.html#METHOD_NAME">METHOD_NAME</a></code></div>
</section>
</li>
<!-- ========== METHOD SUMMARY =========== -->
<li>
<section class="method-summary" id="method-summary">
<h2>Method Summary</h2>
<div id="method-summary-table">
<div class="table-tabs" role="tablist" aria-orientation="horizontal"><button id="method-summary-table-tab0" role="tab" aria-selected="true" aria-controls="method-summary-table.tabpanel" tabindex="0" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table', 3)" class="active-table-tab">All Methods</button><button id="method-summary-table-tab2" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab2', 3)" class="table-tab">Instance Methods</button><button id="method-summary-table-tab3" role="tab" aria-selected="false" aria-controls="method-summary-table.tabpanel" tabindex="-1" onkeydown="switchTab(event)" onclick="show('method-summary-table', 'method-summary-table-tab3', 3)" class="table-tab">Abstract Methods</button></div>
<div id="method-summary-table.tabpanel" role="tabpanel" aria-labelledby="method-summary-table-tab0">
<div class="summary-table three-column-summary">
<div class="table-header col-first">Modifier and Type</div>
<div class="table-header col-second">Method</div>
<div class="table-header col-last">Description</div>
<div class="col-first even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code>int</code></div>
<div class="col-second even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3"><code><a href="#callback(int,int,com.sun.jna.Pointer,com.sun.jna.Pointer)" class="member-name-link">callback</a><wbr>(int&nbsp;dwControl,
 int&nbsp;dwEventType,
 <a href="../../Pointer.html" title="class in com.sun.jna">Pointer</a>&nbsp;lpEventData,
 <a href="../../Pointer.html" title="class in com.sun.jna">Pointer</a>&nbsp;lpContext)</code></div>
<div class="col-last even-row-color method-summary-table method-summary-table-tab2 method-summary-table-tab3">&nbsp;</div>
</div>
</div>
</div>
</section>
</li>
</ul>
</section>
<section class="details">
<ul class="details-list">
<!-- ============ METHOD DETAIL ========== -->
<li>
<section class="method-details" id="method-detail">
<h2>Method Details</h2>
<ul class="member-list">
<li>
<section class="detail" id="callback(int,int,com.sun.jna.Pointer,com.sun.jna.Pointer)">
<h3>callback</h3>
<div class="member-signature"><span class="return-type">int</span>&nbsp;<span class="element-name">callback</span><wbr><span class="parameters">(int&nbsp;dwControl,
 int&nbsp;dwEventType,
 <a href="../../Pointer.html" title="class in com.sun.jna">Pointer</a>&nbsp;lpEventData,
 <a href="../../Pointer.html" title="class in com.sun.jna">Pointer</a>&nbsp;lpContext)</span></div>
<dl class="notes">
<dt>Parameters:</dt>
<dd><code>dwControl</code> - [in] The control code. This parameter can be one of
                   the following values.
 <table>
 <tr><th>Control code</th><th>Meaning</th></tr>
 <tr><td>SERVICE_CONTROL_CONTINUE<br>0x00000003</td><td>Notifies a paused service that it should resume.</td></tr>
 <tr><td>SERVICE_CONTROL_INTERROGATE<br>0x00000004</td><td>Notifies a service that it should report its current status information to the service control manager.<br>The handler should simply return NO_ERROR; the SCM is aware of the current state of the service.</td></tr>
 <tr><td>SERVICE_CONTROL_NETBINDADD<br>0x00000007</td><td>Notifies a network service that there is a new component for binding. The service should bind to the new component.<br>Applications should use Plug and Play functionality instead.</td></tr>
 <tr><td>SERVICE_CONTROL_NETBINDDISABLE<br>0x0000000A</td><td>Notifies a network service that one of its bindings has been disabled. The service should reread its binding information and remove the binding.<br>Applications should use Plug and Play functionality instead.</td></tr>
 <tr><td>SERVICE_CONTROL_NETBINDENABLE<br>0x00000009</td><td>Notifies a network service that a disabled binding has been enabled. The service should reread its binding information and add the new binding.<br>Applications should use Plug and Play functionality instead.</td></tr>
 <tr><td>SERVICE_CONTROL_NETBINDREMOVE<br>0x00000008</td><td>Notifies a network service that a component for binding has been removed. The service should reread its binding information and unbind from the removed component.<br>Applications should use Plug and Play functionality instead.</td></tr>
 <tr><td>SERVICE_CONTROL_PARAMCHANGE<br>0x00000006</td><td>Notifies a service that its startup parameters have changed. The service should reread its startup parameters.</td></tr>
 <tr><td>SERVICE_CONTROL_PAUSE<br>0x00000002</td><td>Notifies a service that it should pause.</td></tr>
 <tr><td>SERVICE_CONTROL_PRESHUTDOWN<br>0x0000000F</td><td>Notifies a service that the system will be shutting down. Services that need additional time to perform cleanup tasks beyond the tight time restriction at system shutdown can use this notification. The service control manager sends this notification to applications that have registered for it before sending a SERVICE_CONTROL_SHUTDOWN notification to applications that have registered for that notification.<br>A service that handles this notification blocks system shutdown until the service stops or the preshutdown time-out interval specified through SERVICE_PRESHUTDOWN_INFO expires. Because this affects the user experience, services should use this feature only if it is absolutely necessary to avoid data loss or significant recovery time at the next system start.<br>Windows Server 2003 and Windows XP:  This value is not supported.</td></tr>
 <tr><td>SERVICE_CONTROL_SHUTDOWN<br>0x00000005</td><td>Notifies a service that the system is shutting down so the service can perform cleanup tasks.<br>If a service accepts this control code, it must stop after it performs its cleanup tasks and return NO_ERROR. After the SCM sends this control code, it will not send other control codes to the service.</td></tr>
 <tr><td>SERVICE_CONTROL_STOP<br>0x00000001</td><td>Notifies a service that it should stop.<br>If a service accepts this control code, it must stop upon receipt and return NO_ERROR. After the SCM sends this control code, it does not send other control codes.<br>Windows XP:  If the service returns NO_ERROR and continues to run, it continues to receive control codes. This behavior changed starting with Windows Server 2003 and Windows XP with SP2.</td></tr>
 </table>

 <p>This parameter can also be one of the following extended control codes. Note that these control codes are not supported by the <a href="Winsvc.Handler.html" title="interface in com.sun.jna.platform.win32"><code>Winsvc.Handler</code></a> function.</p>

 <table>
 <tr><th>Control code</th><th>Meaning</th></tr>
 <tr><td>SERVICE_CONTROL_DEVICEEVENT<br>0x0000000B</td><td>Notifies a service of device events. (The service must have registered to receive these notifications using the RegisterDeviceNotification function.) The dwEventType and lpEventData parameters contain additional information.</td></tr>
 <tr><td>SERVICE_CONTROL_HARDWAREPROFILECHANGE<br>0x0000000C</td><td>Notifies a service that the computer's hardware profile has changed. The dwEventType parameter contains additional information.</td></tr>
 <tr><td>SERVICE_CONTROL_POWEREVENT<br>0x0000000D</td><td>Notifies a service of system power events. The dwEventType parameter contains additional information. If dwEventType is PBT_POWERSETTINGCHANGE, the lpEventData parameter also contains additional information.</td></tr>
 <tr><td>SERVICE_CONTROL_SESSIONCHANGE<br>0x0000000E</td><td>Notifies a service of session change events. Note that a service will only be notified of a user logon if it is fully loaded before the logon attempt is made. The dwEventType and lpEventData parameters contain additional information. </td></tr>
 <tr><td>SERVICE_CONTROL_TIMECHANGE<br>0x00000010</td><td>Notifies a service that the system time has changed. The lpEventData parameter contains additional information. The dwEventType parameter is not used.<br>Windows Server 2008, Windows Vista, Windows Server 2003 and Windows XP:  This control code is not supported.</td></tr>
 <tr><td>SERVICE_CONTROL_TRIGGEREVENT<br>0x00000020</td><td>Notifies a service registered for a service trigger event that the event has occurred.<br>Windows Server 2008, Windows Vista, Windows Server 2003 and Windows XP:  This control code is not supported.</td></tr>
 <tr><td>SERVICE_CONTROL_USERMODEREBOOT<br>0x00000040</td><td>Notifies a service that the user has initiated a reboot.<br>Windows Server 2008 R2, Windows 7, Windows Server 2008, Windows Vista, Windows Server 2003 and Windows XP:  This control code is not supported.</td></tr>
 </table>

 <p>This parameter can also be a user-defined control code, as described in the following table.</p>

 <table>
 <tr><th>Control code</th><th>Meaning</th></tr>
 <tr><td>Range 128 to 255.</td><td>The service defines the action associated with the control code.</td></tr>
 </table></dd>
<dd><code>dwEventType</code> - The type of event that has occurred. This
                    parameter is used if dwControl is
                    SERVICE_CONTROL_DEVICEEVENT,
                    SERVICE_CONTROL_HARDWAREPROFILECHANGE,
                    SERVICE_CONTROL_POWEREVENT, or
                    SERVICE_CONTROL_SESSIONCHANGE. Otherwise, it is
                    zero.

 <p>If dwControl is SERVICE_CONTROL_DEVICEEVENT, this parameter can be
 one of the following values:</p>

 <ul>
 <li>DBT_DEVICEARRIVAL</li>
 <li>DBT_DEVICEREMOVECOMPLETE</li>
 <li>DBT_DEVICEQUERYREMOVE</li>
 <li>DBT_DEVICEQUERYREMOVEFAILED</li>
 <li>DBT_DEVICEREMOVEPENDING DBT_CUSTOMEVENT</li>
 </ul>

 <p>If dwControl is SERVICE_CONTROL_HARDWAREPROFILECHANGE, this parameter
 can be one of the following values:</p>

 <ul>
 <li>DBT_CONFIGCHANGED</li>
 <li>DBT_QUERYCHANGECONFIG</li>
 <li>DBT_CONFIGCHANGECANCELED</li>
 </ul>

 <p>If dwControl is SERVICE_CONTROL_POWEREVENT, this parameter can be one
 of the values specified in the wParam parameter of the
 WM_POWERBROADCAST message.</p>

 <p>If dwControl is SERVICE_CONTROL_SESSIONCHANGE, this parameter can be
 one of the values specified in the wParam parameter of the
 WM_WTSSESSION_CHANGE message.</p></dd>
<dd><code>lpEventData</code> - [in] Additional device information, if required.
                    The format of this data depends on the value of
                    the dwControl and dwEventType parameters.

 <p>If dwControl is SERVICE_CONTROL_DEVICEEVENT, this data corresponds to
 the lParam parameter that applications receive as part of a
 WM_DEVICECHANGE message.</p>

 <p>If dwControl is SERVICE_CONTROL_POWEREVENT and dwEventType is
 PBT_POWERSETTINGCHANGE, this data is a pointer to a
 POWERBROADCAST_SETTING structure.</p>

 <p>If dwControl is SERVICE_CONTROL_SESSIONCHANGE, this parameter is a
 pointer to a WTSSESSION_NOTIFICATION structure.</p>

 <p>If dwControl is SERVICE_CONTROL_TIMECHANGE, this data is a pointer to
 a SERVICE_TIMECHANGE_INFO structure.</p></dd>
<dd><code>lpContext</code> - [in] User-defined data passed from
                    <a href="Advapi32.html#RegisterServiceCtrlHandlerEx(java.lang.String,com.sun.jna.platform.win32.Winsvc.HandlerEx,com.sun.jna.Pointer)"><code>Advapi32.RegisterServiceCtrlHandlerEx(java.lang.String, com.sun.jna.platform.win32.Winsvc.HandlerEx, com.sun.jna.Pointer)</code></a>. When multiple
                    services share a process, the lpContext parameter
                    can help identify the service.</dd>
<dt>Returns:</dt>
<dd>The return value for this function depends on the control
         code received.

 <p>The following list identifies the rules for this return value:</p>

 <ul>
 <li>In general, if your service does not handle the control, return
 ERROR_CALL_NOT_IMPLEMENTED. However, your service should return
 NO_ERROR for SERVICE_CONTROL_INTERROGATE even if your service does
 not handle it.</li>
 <li>If your service handles SERVICE_CONTROL_STOP or
 SERVICE_CONTROL_SHUTDOWN, return NO_ERROR.</li>
 <li>If your service handles SERVICE_CONTROL_DEVICEEVENT, return
 NO_ERROR to grant the request and an error code to deny the
 request.</li>
 <li>If your service handles SERVICE_CONTROL_HARDWAREPROFILECHANGE,
 return NO_ERROR to grant the request and an error code to deny the
 request.</li> <li>If your service handles
 SERVICE_CONTROL_POWEREVENT, return NO_ERROR to grant the request and
 an error code to deny the request.</li>
 <li>For all other control codes your service handles, return
 NO_ERROR.</li>
 </ul></dd>
</dl>
</section>
</li>
</ul>
</section>
</li>
</ul>
</section>
<!-- ========= END OF CLASS DATA ========= -->
</main>
<footer role="contentinfo">
<hr>
<p class="legal-copy"><small>Copyright &copy; 2007-2025 Timothy Wall. All Rights Reserved.</small></p>
</footer>
</div>
</div>
</body>
</html>
